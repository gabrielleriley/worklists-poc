<mat-card fxLayout="column" class="mat-elevation-z8">
    <div class="table-loading-shade" *ngIf="!(firstLoadComplete$ | async)">
        <mat-spinner></mat-spinner>
    </div>
    <mat-card-content fxFlex fxLayout="column" [ngClass]="{ hidden: !(firstLoadComplete$ | async ) }">
        <!-- Filters -->
        <span fxLayout="row wrap" fxLayoutGap="1rem" [formGroup]="searchForm">
            <mat-form-field>
                <mat-label>Last Name</mat-label>
                <input formControlName="lastName" matInput placeholder="Smith">
            </mat-form-field>

            <mat-form-field>
                <mat-label>Gender</mat-label>
                <mat-select formControlName="genders" multiple>
                    <mat-option value="female">Female</mat-option>
                    <mat-option value="male">Male</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field>
                <mat-label>Nationality</mat-label>
                <mat-select formControlName="nationalityCodes" multiple>
                    <mat-option *ngFor="let nat of nationalities$ | async" [value]="nat.code">
                        {{ nat.name }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </span>

        <span fxFlex style="position: relative">
            <div class="table-loading-shade" *ngIf="isLoading$ | async">
                <mat-spinner></mat-spinner>
            </div>
            <table mat-table matSort matSortActive="firstName" matSortDirection="asc" [dataSource]="entities$ | async">
                <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef>Id</th>
                    <td mat-cell *matCellDef="let row">{{row.id}}</td>
                </ng-container>

                <ng-container matColumnDef="firstName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear="true">First Name</th>
                    <td mat-cell *matCellDef="let row">{{row.firstName}}</td>
                </ng-container>

                <ng-container matColumnDef="lastName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear="true">Last Name</th>
                    <td mat-cell *matCellDef="let row">{{row.lastName}}</td>
                </ng-container>

                <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear="true">Email</th>
                    <td mat-cell *matCellDef="let row">{{row.email}}</td>
                </ng-container>

                <ng-container matColumnDef="nationality">
                    <th mat-header-cell *matHeaderCellDef>Nationality</th>
                    <td mat-cell *matCellDef="let row">{{row.nationality}}</td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
        </span>
        <div fxFlex *ngIf="(entities$ | async).length == 0">
            <!-- <div *ngIf="firstLoadComplete$ | async">No Items</div> -->
            <div>No Items</div>
        </div>

        <mat-paginator #paginator [length]="totalNumEntities$ | async" [pageSize]="12">
        </mat-paginator>
    </mat-card-content>
</mat-card>